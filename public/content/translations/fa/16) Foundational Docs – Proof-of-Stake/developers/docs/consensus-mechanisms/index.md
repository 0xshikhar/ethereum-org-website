---
title: مکانیزم‌های اجماع
description: توضیحی درباره پروتکل‌های اجماع در سیستم‌های توزیع‌شده و نقشی که در اتریوم ایفا می‌کنند.
lang: fa
---

مفهوم "مکانیسم اجماع" اغلب به صورت محاوره‌ای برای اشاره به پروتکل‌های "اثبات سهام"، "اثبات کار" یا "اثبات صلاحیت" استفاده می‌شود. با این حال، این‌ موارد فقط اجزایی در مکانیزم‌های اجماع هستند که از [حملات سیبیل](/glossary/#sybil-attack) محافظت می‌کنند. مکانیسم‌های اجماع مجموعه کاملی از ایده‌ها، پروتکل‌ها و مشوق‌ها هستند که مجموعه‌ای از گره‌ها را قادر می‌سازد تا در مورد وضعیت یک بلاکچین به توافق برسند.

## پیش‌نیازها {#prerequisites}

برای درک بهتر این صفحه،‌ توصیه می‌شود ابتدا [مقدمه‌ای بر اتریوم](/developers/docs/intro-to-ethereum/) را مطالعه کنید.

## اجماع چیست؟ {#what-is-consensus}

منظور از اجماع، یک توافقنامه‌ کلی است که به آن دست یافته‌ایم. فرض کنید گروهی از افراد به سینما می‌روند. اگر در مورد انتخاب پیشنهادی فیلم اختلاف نظر وجود نداشته باشد، اجماع حاصل می شود. اگر اختلاف نظر وجود داشته باشد، گروه باید ابزاری داشته باشد تا تصمیم بگیرد کدام فیلم را ببیند. در موارد اختلاف شدید، گروه در نهایت از هم جدا می شود.

در رابطه با بلاکچین اتریوم، این فرآیند رسمی شده است و رسیدن به اجماع به این معنی است که حداقل 66 درصد از گره‌های شبکه در مورد وضعیت جهانی شبکه توافق دارند.

## مکانیزم اجماع چیست؟ {#what-is-a-consensus-mechanism}

اصطلاح مکانیزم اجماع به کل پشته پروتکل‌ها، مشوق‌ها و ایده‌هایی اشاره دارد که به شبکه‌ای از گره‌ها اجازه می‌دهد در مورد وضعیت یک بلاکچین به توافق برسند.

اتریوم از مکانیزم اجماع مبتنی بر اثبات سهام استفاده می‌کند که امنیت اقتصاد رمزنگاری خود را از مجموعه‌ای از پاداش‌ها و جریمه‌های اعمال شده برای سرمایه قفل شده توسط سهام گذاران به دست می‌آورد. این ساختار انگیزشی اشخاص سهام گذاران را تشویق می‌کند اعتبارسنج‌های صادقانه را اجرا کنند، کسانی را که این کار را نمی‌کنند تنبیه می‌کند و هزینه بسیار بالایی برای حمله به شبکه ایجاد می‌کند.

سپس، پروتکلی وجود دارد که نحوه انتخاب اعتبارسنج‌های صادق برای پیشنهاد یا اعتبارسنجی بلوک‌ها، پردازش تراکنش‌ها و رای دادن به دیدگاه آنها در مورد رئیس زنجیره را کنترل می‌کند. در موقعیت‌های نادری که چندین بلوک در یک موقعیت در نزدیکی سر زنجیره قرار دارند، یک مکانیسم انتخاب فورک وجود دارد که بلوک‌هایی را انتخاب می‌کند که «سنگین‌ترین» زنجیره را تشکیل می‌دهند، که با تعداد اعتبارسنج که به بلوک‌های وزن‌شده توسط میزان اتر سهام گذاری شده آنها رأی داده‌اند، اندازه‌گیری می‌شود.

برخی از مفاهیم برای اجماع مهم هستند مانند امنیت اضافی ارائه شده توسط هماهنگی اجتماعی خارج از باند به عنوان آخرین خط دفاع در برابر حملات در شبکه که به صراحت در کد تعریف نشده‌اند.

این اجزا با هم مکانیسم اجماع را تشکیل می‌دهند.

## انواع مکانیزم‌های اجماع {#types-of-consensus-mechanisms}

### بر اساس اثبات کار {#proof-of-work}

مانند بیت‌کوین، اتریوم زمانی از پروتکل اجماع مبتنی بر **اثبات کار (PoW)** استفاده می‌کرد.

#### ساختن بلوک {#pow-block-creation}

استخراجگر برای ایجاد بلوک‌های جدید پر از تراکنش‌های پردازش شده با یکدیگر رقابت می‌کنند. برنده، بلوک جدید را با بقیه شبکه به اشتراک می‌گذارد و مقداری اتر تازه ضرب‌شده به دست می‌آورد. این رقابت را کامپیوتری برنده می‌شود که قادر به حل سریع ترین معمای ریاضی است. این مورد باعث ایجاد پیوند رمزنگاری بین بلوک فعلی و بلوک قبلی می‌شود. حل این معما همان کار در «اثبات کار» است. سپس زنجیره متعارف توسط یک قانون فورک انتخاب می‌شود که مجموعه‌ای از بلوک‌ها را انتخاب می‌کند که بیشترین کار را برای استخراج آنها انجام داده‌اند.

#### ایمنی {#pow-security}

شبکه با توجه به این حقیقت که برای فریب دادن زنجیره نیاز به ‎51%‏ توان پردازش شبکه دارید، ایمن می‌ماند. این کار نیاز به چنان سرمایه‌گذاری زیادی برای تجهیزات و انرژی دارد که احتمالاً خرج شما از سودی که به دست خواهید آورد بیشتر خواهد بود.

اطلاعات بیشتر درباره‌ [اثبات کار](/developers/docs/consensus-mechanisms/pow/)

### بر اساس اثبات سهام {#proof-of-stake}

اتریوم اکنون از پروتکل اجماع مبتنی بر **اثبات سهام (PoS)** استفاده می‌کند.

#### ساختن بلوک {#pos-block-creation}

اعتبارسنج‌ها بلوک‌ها را ایجاد می‌کنند. یک اعتبارسنج به طور تصادفی در هر اسلات انتخاب می‌شود تا پیشنهاد دهنده بلوک باشد. کاربر اجماعِ آنها، مجموعه‌ای از تراکنش‌ها را به عنوان "بار اجرایی" از مشتری اجرای جفت شده خود درخواست می‌کند. آنها این مورد را در داده‌های اجماع می‌پیچانند یا به اصطلاح رپ می‌کنند تا یک بلوک تشکیل دهند که آن را به گره‌های دیگر در شبکه اتریوم ارسال کنند. به این تولید بلوک در اتریوم، پاداش داده می‌شود. در موارد نادری که چندین بلوک ممکن برای یک اسلات وجود دارد، یا گره‌ها در زمان‌های مختلف درباره بلوک‌ها می‌شنوند، الگوریتم انتخاب فورک بلوکی را انتخاب می‌کند که زنجیره با بیشترین وزن اعتبارسنج‌ها را تشکیل می‌دهد (که وزن تعداد اعتبارسنج‌هایی است که با مقدار اتر آنها مقیاس‌بندی شده است).

#### ایمنی {#pos-security}

یک سیستم اثبات سهام از نظر اقتصاد رمزنگاری ایمن است زیرا مهاجمی که تلاش می‌کند کنترل زنجیره را در دست بگیرد باید مقدار زیادی از اتر را از بین ببرد. یک سیستم پاداش، سهام گذاران را تشویق می‌کند صادقانه رفتار کنند، و جریمه‌ها، سهامداران را از اقدام شرورانه باز می‌دارد.

اطلاعات بیشتر درباره‌ [اثبات سهام](/developers/docs/consensus-mechanisms/pos/)

### یک راهنمای تصویری {#types-of-consensus-video}

برای کسب اطلاعات بیشتر درباره‌ مکانیزم‌های مختلف اجماع که در اتریوم استفاده‌شده است، نگاه کنید به:

<YouTube id="ojxfbN78WFQ" />

### مقاومت سیبیل و انتخاب زنجیره {#sybil-chain}

اثبات کار و اثبات سهام به تنهایی پروتکل‌های اجماع نیستند، اما اغلب برای سادگی به آن‌ها اشاره می‌شود. این‌ها در واقع مکانیزم‌های مقاومت سیبیل و انتخاب‌کننده‌ نویسنده‌ بلوک‌ هستند؛ روشی هستند برای انتخاب این که چه کسی آخرین بلوک را بنویسد. مؤلفه مهم دیگر، الگوریتم انتخاب زنجیره (معروف به انتخاب فورک) است که گره‌ها را قادر می سازد در سناریوهایی که چندین بلوک در یک موقعیت وجود دارند، یک بلوک صحیح را در سر زنجیره انتخاب کنند.

**مقاومت سیبیل** عملکرد یک پروتکل در مقابل یک حمله‌ سیبیل را می‌سنجد. مقاومت در برابر چنین حملاتی برای یک زنجیره‌ بلوکی غیرمتمرکز بسیار ضروری است و به استخراج‌گرها و اعتبارسنج‌ها امکان می‌دهد بر اساس منابعی که در اختیار گذاشته‌اند به‌صورت مساوی پاداش دریافت کنند. اثبات سهام و اثبات کار با مجبور کردن کاربر به هزینه کردن انرژی بسیار یا گذاشتن وثیقه‌ زیاد، جلوی این حمله را می‌گیرند. این تمهیدات محافظتی، مانعی به‌صرفه علیه حملات سیبیل هستند.

یک **قانون انتخاب زنجیره** برای تصمیم‌گیری در این باره که کدام زنجیره، زنجیره‌ «درست» است، استفاده می‌شود. بیت‌کوین از قانون «طولانی‌ترین زنجیره» استفاده می‌کند، به این معنی که بلاک‌چینی که طولانی‌ترین باشد، همان چیزی است که بقیه گره‌ها آن را معتبر می‌پذیرند و با آن کار می‌کنند. برای زنجیره‌های اثبات کار، بلندترین زنجیره بر اساس سختی اثبات کار تجمیعی کل زنجیره مشخص می‌شود. اتریوم از طولانی ترین قانون زنجیره نیز استفاده می‌کرد؛ با این حال، اکنون که اتریوم بر روی اثبات سهام اجرا می‌شود، الگوریتم انتخاب فورک به‌روزرسانی‌شده‌ای را اتخاذ کرد که «وزن» زنجیره را اندازه‌گیری می‌کند. وزن، مجموع آرای جمع شده اعتبارسنج است که توسط موجود‌ی‌های اتر سهام‌گذاری شده اعتبارسنج وزن می‌شود.

اتریوم از مکانیزم اجماع به نام [Gasper](/developers/docs/consensus-mechanisms/pos/gasper/) استفاده می کند که [Casper FFG proof-of-stake](https://arxiv.org/abs/1710.09437) را با [قانون انتخاب فورکGHOST](https://arxiv.org/abs/2003.03052) ترکیب می کند.

## بیشتر بخوانید {#further-reading}

- [الگوریتم اجماع زنجیره‌ی بلوکی چیست؟](https://academy.binance.com/en/articles/what-is-a-blockchain-consensus-algorithm)
- [اجماع ناکاموتو چیست؟ راهنمای کامل مبتدی‌ها](https://blockonomi.com/nakamoto-consensus/)
- [Casper چگونه کار می‌کند؟](https://medium.com/unitychain/intro-to-casper-ffg-9ed944d98b2d)
- [درباره‌ی ایمنی و کارایی زنجیره‌های بلوکی مبتنی بر اثبات کار](https://eprint.iacr.org/2016/555.pdf)
- [تحمل خطای بیزانس](https://en.wikipedia.org/wiki/Byzantine_fault)

_آیا منبعی اجتماعی می‌شناسید که به شما کمک کرده باشد؟ این صفحه را ویرایش کنید و به آن اضافه کنید!_

## موضوعات مرتبط {#related-topics}

- [اثبات کار](/developers/docs/consensus-mechanisms/pow/)
- [استخراج](/developers/docs/consensus-mechanisms/pow/mining/)
- [اثبات سهام](/developers/docs/consensus-mechanisms/pos/)
- [اثبات صلاحیت (PoA)](/developers/docs/consensus-mechanisms/poa/)
