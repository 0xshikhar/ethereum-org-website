---
title: گاسپر
description: توضیح در رابطه با مکانیزم اثبات سهام Gasper.
lang: fa
---

Gasper ترکیبی از گجت قطعیت دوستانه (Casper-FFG) و الگوریتم انتخاب فورک LMD-GHOST است. این دو جزء باهم، مکانیزم اجماع را تشکیل می دهند و اثبات سهام اتریوم را امن می‌کنند. Casper مکانیزمی است که بلوک های مشخص را تا قطعیت ارتقا می‌دهد تا شرکت‌کنندگان جدید شبکه‌ بتوانند از همگام بودن با زنجیره‌ اصلی مطمئن شوند. الگوریتم انتخاب فورک از آرای انباشته شده برای مطمئن شدن از انتخاب راحت و درست در زمان به وجود آمدن فورک در زنجیره‌‌ بلوکی استفاده می‌کند.

**توجه کنید** که تعریف اصلی Casper-FFG برای ادغام شدن در Gasper مقداری به روز شد. در این صفحه ما تعریف به‌روز شده را درنظر می‌گیریم.

## پیش‌نیاز ها

برای درک این مطلب، واجب است تا صفحه مقدمه در [اثبات سهام](/developers/docs/consensus-mechanisms/pos/) را بخوانید.

## نقش Gasper {#role-of-gasper}

Gasper در بالای اثبات سهام زنجیره‌‌ بلوکی، جایی که گره‌ها Ether را به عنوان سپرده‌ای تهیه می‌کنند که قابل تخریب یا تنبل یا ناراست در پیشنهاد معتبر ساختن است می‌نشیند. Gasper مکانیزمی است که تعریف می‌کند چگونه اعتبارسنج ها مجازات یا پاداش داده خواهند شد، و کدام بلوک ها پذیرفته و کدام رد، و کدام فورک زنجیره‌‌ بلوکی بر روی آن ساخته می‌شود.

## قطعیت چسیت؟ {#what-is-finality}

قطعیت بخشی از بلوک ها است که نمی‌توانند برگرداننده شوند مگر بخاطر وفاق بحرانی و زمانی که مهاجمی حداقل 1/3 کل اترهای انباشته شده را نابود می‌کند. قطعیت بلوک ها به معنی بخشی از اطلاعات است که زنجیره‌‌ بلوکی درباره آن ها مطمئن است. یک بلوک باید از یک روند دو مرحله‌ای ارتقا عبور کند تا بتواند قطعی شود:

1. دو-سوم اتر سهام گذاری شده باید به نفع آن بلوک برای پیوستن به زنجیره اصلی رای بدهند. این شرط، بلوک را به مرحله "مشروعیت" ارتقا می‌دهد. احنمال برگردانی بلوک هایی که به مرحله مشروعیت رسیده باشند، کم است، اما تحت شرایط مشخصی امکان‌پذیر است.
2. زمانی که بلوک دیگری در بالای بلوکی دیگر مشروع شود، به مرحله قطعی ارتقا پیدا می‌کند. قطعی کردن یک بلوک به منزله تعهدی برای اضافه کردن بلوک به زنجیره اصلی است. نمی‌تواند بازگردانی شود مگر اینکه یک مهاجم میلیون ها اتر (میلیاردها $USD) را از بین ببرد.

این ارتقا بلوک ها در هر اسلات اتفاق نمی‌افتد. در عوض، تنها بلوک های مرزی ایپوک می‌توانند مشروع و قطعی بشوند. این بلوک ها به عنوان "نقاط بررسی" شناخته می‌شوند. ارتقا نیاز به یک جفت تقطه بررسی دارد. یکی "لینک فوق اکثریت" بین دو نقطه بررسی پیاپی (دو سوم کل اتر سهام‌گزاری شده باید به درست بودن نقطه بررسی B در برابر A رای دهند) باید وجود داشته باشد تا نقطه بررسی های اخیر را به مرحله قطعیت ارتقا دهد و بلوک را مشروع کند.

زیرا قطعیت نیاز به موافقت حداقل دو-سوم بلوک ها در رابطه با مشروعیت آن دارد، یک مهاجم نمی‌تواند احتمالا یک نسخه اضافه از زنجیر را بدون موارد زیر قطعی کند:

1. مالکیت یا دستکاری دو-سوم اتر سهام‌گزاری شده.
2. نابود کردن حداقل یک-سوم اتر سهام‌گزاری شده.

شرط اول در صورتی رخ می‌دهد که دو-سوم اتر سهام‌گزاری شده برای قطعی کردن زنجیر نیاز باشد. شرط دوم در صورتی پیش می‌آید چون اگر دو-سوم مجموع سهام به نفع هر دو فورک رای دهند، آن وقت یک-سوم حتما به هر دو رای داده است. جفت رای دادن ها شرایط جریمه درست می‌کند که به شدت با آن برخورد می‌شود، و یک-سوم کل سهام از بین خواهد رفت. به طور مثال در می 2022، مهاجم لازم است معادل 10 میلیارد دلار آمریکا اتر بسوزاند. الگوریتمی که در Gasper قطعیت و مشرعیت را بر بلوک اعمال می‌کند کمی متفاوت از [ Casper از نوع گجت قطعیت دوستانه قطعیت (Casper-FFG)](https://arxiv.org/pdf/1710.09437.pdf) است.

### مشوق‌ها و جریمه {#incentives-and-slashing}

اعتبارسنج ها برای معتبر ساختن صادقانه بلوک ها پاداش دریافت می‌کنند. اتر به عنوان پاداش به سهام آن ها افزوده خواهد شد. از طرفی دیگر، اعتبارسنج هایی که غایب هستند و در زمان فراخوانی موفق به عمل کردن نمی‌شوند، پاداش را از دست خواهند داد و گاهی اوقات مقدار کمی از سهام خود را از دست می‌دهند. با این حال، جریمه‌های آفلاین بودن ناچیز است و در بیشتر موارد به هزینه‌های فرصت پاداش‌های از دست رفته می‌رسد. با این حال، انجام برخی از اقدامات اعتبارسنجی به طور تصادفی بسیار دشوار است و اثر مخربی به جا می‌گذراد، مانند پیشنهاد چندین بلوک برای یک اسلات، تایید چندین بلوک برای یک اسلات، یا مخالفت با آراء نقاط بررسی قبلی. اینها رفتارهای «قابل جریمه» هستند که به شدت جریمه می‌شوند - این رفتار ها منجر به از بین رفتن بخشی از سهام اعتبار‌سنج و حذف اعتبار‌سنج از شبکه اعتبار‌دهنده‌ها می‌شود. این فرایند 36 روز به طول می‌انجامد. در روز اول، یک مجازات اولیه تا 1 اتر است. سپس اتر اعتبارسنج جریمه شده به آرامی در طول دوره خروج کم می‌شود، اما در روز 18، آنها یک "جریمه همبستگی" دریافت می‌کنند، که وقتی اعتبار‌دهنده‌های بیشتری در همان زمان جریمه می‌شوند، بزرگ‌تر می‌شود. بیش‌ترین مجازات، کل سهام است. این جوایز و جریمه‌ها برای تشویق اعتباردهندگان صادق و بی انگیزه کردن حملات در شبکه طراحی شده‌اند.

### نشت عدم‌فعالیت {#inactivity-leak}

Gasper علاوه بر امنیت، "زنده بودن قابل قبول" را نیز فراهم می کند. این در صورتی است که تا زمانی که دو سوم کل اتر سهاک‌گذاری شده صادقانه و با پیروی از پروتکل رای بدهد، زنجیره می‌تواند بدون توجه به هر فعالیت دیگری (مانند حملات، مشکلات تأخیر، یا جریمه ها) قطعی شود. به عبارت دیگر، یک سوم کل اتر سهام‌گذاری شده باید به نحوی در معرض خطر قرار گیرد تا از نهایی شدن زنجیره جلوگیری شود. در Gasper، یک خط دفاعی اضافی در برابر شکست زنده بودن وجود دارد که به "نشت عدم‌ فعالیت" معروف است. این ساز و کار زمانی فعال می شود که زنجیره برای بیش از چهار دوره نتواند نهایی شود. اعتبارسنج‌هایی که فعالانه زنجیره اکثریت را تصدیق نمی کنند، سهام آنها به تدریج کم می‌شود تا زمانی که اکثریت دو سوم کل سهام را به دست آورند، و اطمینان حاصل شود که ناکامی‌های زنده بودن فقط موقتی هستند.

### انتخاب فورک {#fork-choice}

تعریف اصلی Casper-FFG شامل یک الگوریتم انتخاب فورک بود که این قانون زیر را دیکته می‌کرد: `زنجیره ای را که حاوی نقاط بررسی با بیشترین طول است ` که در آن، طول به عنوان بیشترین فاصله از بلوک ایجاد تعریف می شود، دنبال کنید. در Gasper، قانون اصلی انتخاب فورک به نفع یک الگوریتم پیچیده‌تر به نام LMD-GHOST منسوخ شده است. درک این نکته مهم است که در شرایط عادی، قانون انتخاب فورک غیرضروری است - برای هر اسلات یک پیشنهاد دهنده بلوک وجود دارد، و اعتبارسنج های صادق آن را تأیید می کنند. تنها در موارد عدم همزمانی شبکه بزرگ یا زمانی که یک پیشنهاد دهنده ناصادق بلوک ایجاد ابهام کرده است که الگوریتم انتخاب فورک مورد نیاز است. با این حال، زمانی که این موارد پیش می‌آیند، الگوریتم انتخاب فورک یک دفاع حیاتی است که انتخاب زنجیر درست را تضمین می‌کند.

LMD-GHOST مخفف "جدیدترین درخت فرعی مشاهده شده حریص و سنگین ترین پیام-محور" است. این روشی پیچیده برای تعریف الگوریتمی است که فورکی را با بیشترین وزن انباشته گواهی‌ها به‌عنوان نمونه متعارف انتخاب می‌کند (سنگین‌ترین زیردرخت حریصانه) و اگر چندین پیام از یک اعتبارسنج دریافت شود، فقط آخرین مورد در نظر گرفته می‌شود (آخرین-پیام محور). قبل از افزودن سنگین ترین بلوک به زنجیره درست خود، هر اعتبارسنج هر بلوک را با استفاده از این قانون ارزیابی می کند.

## اطلاعات بیشتر {#further-reading}

- [Gasper: ترکیبی از GHOST و Casper](https://arxiv.org/pdf/2003.03052.pdf)
- [Casper، گجت قطعیت دوستانه](https://arxiv.org/pdf/1710.09437.pdf)
