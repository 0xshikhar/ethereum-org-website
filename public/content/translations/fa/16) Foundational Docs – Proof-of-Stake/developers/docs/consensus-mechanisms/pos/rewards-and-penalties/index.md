---
title: پاداش‌ها و جریمه‌ها در اثبات-سهام
description: درباره مشوق های داخل پروتکل در اتریوم اثبات سهام بیشتر بدانید.
lang: fa
---

اتریوم با استفاده از رمزارز بومی خود، اتر (ETH) ایمن شده است. اپراتورهای گره که مایل به مشارکت در اعتبارسنجی بلوک ها و شناسایی سر زنجیره هستند، اتر را در [قرارداد سپرده](/staking/deposit-contract/) در اتریوم واریز می کنند. سپس به آنها اتر پرداخت می شود تا نرم افزار اعتبارسنج را اجرا کنند که اعتبار بلوک های جدید دریافت شده از طریق شبکه همتا به همتا را بررسی می کند و الگوریتم انتخاب فورک را برای شناسایی سر زنجیره اعمال می کند.

دو نقش اصلی برای اعتبارسنج وجود دارد: 1) بررسی بلوک‌های جدید و "تأیید" آنها در صورت معتبر بودن، 2) پیشنهاد بلوک‌های جدید در صورت انتخاب تصادفی از مجموع استخر اعتبارسنج‌ها. اگر اعتبارسنج، وقتی خواسته شد، نتواند هر یک از این وظایف را انجام دهد، دریافت اتر را از دست می‌دهد. اعتبارسنج ها همچنین گاهی اوقات وظیفه جمع آوری امضا و شرکت در کمیته های همگام سازی را بر عهده دارند.

برخی از اقدامات نیز وجود دارد که انجام آنها به طور تصادفی بسیار دشوار است و نشانه‌ای از قصد مخرب هستند، مانند پیشنهاد چندین بلوک برای یک اسلات یا تأیید چندین بلوک برای یک اسلات. اینها رفتارهای "قابل جریمه شدن" هستند که منجر به سوزاندن مقداری اتر (حداکثر 1 اتر) اعتبارسنج قبل از حذف اعتبارسنج از شبکه می شود که 36 روز طول می کشد. اتر اعتبارسنج جریمه شده به آرامی در طول دوره خروج تخلیه می شود، اما در روز 18 آنها یک "جریمه همبستگی" دریافت می کنند که وقتی اعتبارسنج های بیشتری در همان زمان جریمه می شوند بزرگتر می شود. بنابراین ساختار تشویقیِ مکانیزم اجماع، هزینه صداقت را می پردازد و بازیگران بد را مجازات می کند.

تمام جوایز و مجازات ها، یکبار در هر ایپوک اعمال می‌شوند.

برای جزئیات بیشتر به مطالعه ادامه دهید...

## پاداش ها و جرایم {#rewards}

### پاداش‌ها {#rewards}

اعتبارسنجها وقتی رای‌هایی را دریافت می‌کنند که با اکثریت اعتبارسنج های دیگر مطابقت دارد، وقتی بلوک‌هایی را پیشنهاد می‌کنند، و زمانی که در کمیته‌های همگام‌سازی شرکت می‌کنند، پاداش دریافت می‌کنند. ارزش پاداش ها در هر ایپوک از یک `base_reward` محاسبه می شود. این واحد پایه ای است که سایر پاداش ها از آن محاسبه می شود. این `base_reward` نشان‌دهنده میانگین پاداش دریافتی توسط اعتبارسنج در شرایط بهینه در هر ایپوک است. این از تراز مؤثر اعتبارسنج و تعداد کل اعتبارسنج های فعال به شرح زیر محاسبه می‌شود:

```
base_reward = effective_balance * (base_reward_factor / (base_rewards_per_epoch * sqrt(sum(active_balance))))
```

که در آن `base_reward_factor` عبارت است از 64 و `base_rewards_per_epoch` برابر است با 4 و `sum (موجودی فعال)` کل اتر سهامگذاری شده در تمام اعتبارسنج های فعال است.

این بدین معنی است که پاداش پایه با موجودی مؤثر اعتبارسنج و با تعداد اعتبارسنج ها در شبکه نسبت معکوس دارد. هرچه اعتبارسنج بیشتر باشد، صدور کلی بیشتر است (به عنوان `sqrt(N)` اما `پایه_پاداش` برای هر اعتبارسنج کوچکتر است (به عنوان `1/sqrt(N)`). این عوامل بر APR یک گره سهام‌گذاری تاثیر می گذارد. دلیل این امر را در [یادداشت های ویتالیک](https://notes.ethereum.org/@vbuterin/rkhCgQteN?type=view#Base-rewards) بخوانید.

سپس پاداش کل به عنوان مجموع پنج جزء محاسبه می شود که هر کدام دارای وزنی هستند که تعیین می کند هر جزء چقدر به پاداش کل اضافه می کند. اجزاء عبارتند از:

```
1. source vote: the validator has made a timely vote for the correct source checkpoint
2. target vote: the validator has made a timely vote for the correct target checkpoint
3. head vote: the validator has made a timely vote for the correct head block
4. sync committee reward: the validator has participated in a sync committee
5. proposer reward: the validator has proposed a block in the correct slot
```

وزن هر جزء به شکل زیر است:

```
TIMELY_SOURCE_WEIGHT    uint64(14)
TIMELY_TARGET_WEIGHT    uint64(26)
TIMELY_HEAD_WEIGHT  uint64(14)
SYNC_REWARD_WEIGHT  uint64(2)
PROPOSER_WEIGHT uint64(8)
```

مجموع این وزن ها 64 است. پاداش به صورت مجموع اوزان قابل اعمال تقسیم بر 64 محاسبه می شود. اعتبارسنجی که به‌موقع رأی‌های منبع، هدف و سر را ایجاد کرده، یک بلوک پیشنهاد کرده و در کمیته همگام‌سازی شرکت کرده است، می‌تواند `64/64 * base_reward == base_reward` دریافت کند. با این حال، یک اعتبارسنج معمولاً پیشنهاد دهنده بلوک نیست، بنابراین حداکثر پاداش آنها `64-8 /64 * base_reward == 7/8 * base_reward` است. اعتبار سنج هایی که نه پیشنهاد دهنده بلوک هستند و نه در کمیته همگام سازی، می توانند `64-8-2 / 64 * base_reward == 6.75/8 * base_reward` دریافت کنند.

یک پاداش اضافی برای تشویق تصدیق‌های سریع اضافه می شود. این `inclusion_delay_reward` است. این مقدار برابر با `base_reward` ضرب در `1/تأخیر` است که در آن `تاخیر` تعداد اسلات‌هایی است که پیشنهاد بلوک و تصدیق را از هم جدا می‌کنند. به عنوان مثال، اگر تصدیق در یک شکاف از پیشنهاد بلوک ارسال شود، گواهی‌دهنده `base_reward * 1/1 == base_reward` دریافت می‌کند. اگر تصدیق در اسلات بعدی برسد، تصدیق‌کننده `base_reward * 1/2` و غیره دریافت می‌کند.

پیشنهادکنندگان بلوک `8 / 64 * base_reward` را برای **هر تصدیق معتبر** موجود در بلوک دریافت می‌کنند، بنابراین ارزش واقعی مقیاس‌های پاداش، با تعداد اعتبارسنج های تأییدکننده مقیاس‌بندی می‌شود. پیشنهاد دهندگان بلوک همچنین می‌توانند پاداش خود را با گنجاندن شواهدی مبنی بر رفتار نادرست سایر اعتبارسنج ها در بلوک پیشنهادی خود افزایش دهند. این پاداش‌ها همان «هویج‌هایی» هستند که صداقت اعتبارسنج را تشویق می‌کنند. پیشنهاد دهنده بلوکی که شامل اسلش است با `slashed_validators_effective_balance / 512` پاداش می‌گیرد.

### مجازات ها {#penalties}

تا اینجا ما اعتبارسنج های کاملاً خوبی را در نظر گرفته‌ایم، اما در مورد اعتبارسنج هایی که رأی‌های سر، منبع و هدف را به‌موقع نمی‌آورند یا آهسته انجام می‌دهند، چطور؟

جریمه‌های از دست دادن آرای هدف و منبع برابر با پاداش‌هایی است که امضاکننده در صورت ارسال آن‌ها دریافت می‌کرد. این بدان معناست که به جای اضافه شدن پاداش به موجودی شان، ارزش معادلی از موجودی شان حذف می شود. هیچ جریمه ای برای از دست دادن رای سر وجود ندارد (یعنی رای های سر فقط پاداش می گیرند، هرگز جریمه نمی شوند). هیچ جریمه ای در ارتباط با `تاخیر_شمول` وجود ندارد - فقط پاداش به موجودی اعتبارسنج اضافه نمی شود. همچنین هیچ جریمه ای برای عدم پیشنهاد بلوک وجود ندارد.

در [مشخصات اجماع](https://github.com/ethereum/consensus-specs/blob/dev/specs/altair/beacon-chain.md) درباره جوایز و مجازات‌ها بیشتر بخوانید. پاداش‌ها و جریمه‌ها در ارتقاء Bellatrix تنظیم شدند - دنی رایان و ویتالیک را در این [ویدیوی EIP نگاه کنید](https://www.youtube.com/watch?v=iaAEGs1DMgQ) تماشا کنید.

## جریمه کردن (اسلشینگ) {#slashing}

جریمه کردن یک عمل شدیدتر است که منجر به حذف اجباری یک اعتبارسنج از شبکه و از دست دادن اتر سهام‌گذاری شده اش می شود. سه راه برای جریمه کردن یک اعتبارسنج وجود دارد که همه آنها به منزله پیشنهاد یا تأیید غیرصادقانه بلوک ها هستند:

- با پیشنهاد و امضای دو بلوک مختلف برای یک اسلات
- با تأیید بلوکی که بلوک دیگری را احاطه کرده است (عملاً تغییر سابقه)
- با «رای گیری دوباره» از طریق تصدیق دو نامزد برای یک بلوک

اگر این اقدامات شناسایی شوند، اعتبارسنج جریمه می شود. این بدان معنی است که 1/32 اتر سهام‌گذاری شده آنها (حداکثر 1 اتر) بلافاصله سوزانده می شود، سپس یک دوره حذف 36 روزه آغاز می شود. در طول این دوره حذف، سهام اعتبارسنج به تدریج از بین می رود. در نقطه میانی (روز 18) یک جریمه اضافی اعمال می‌شود که اندازه آن با کل اتر سهام‌گذاری شده‌ تمام اعتبار‌سنج‌ های جریمه شده در 36 روز قبل از رویداد جریمه مقیاس‌بندی می‌شود. این بدان معناست که وقتی اعتبار‌سنج های بیشتری جریمه می‌شوند، بزرگی جریمه افزایش می‌یابد. حداکثر جریمه، تراز مؤثر تمام اعتبارسنج‌های جریمه شده است (یعنی اگر اعتبار‌سنج های زیادی جریمه شوند، ممکن است کل سهام خود را از دست بدهند). از سوی دیگر، یک رویداد جریمه مجزا تنها بخش کوچکی از سهام اعتبارسنج را می سوزاند. این جریمه نقطه میانی که با تعداد اعتبارسنج‌های جریمه شده مقیاس می‌شود، «مجازات همبستگی» نامیده می‌شود.

## نشت عدم فعالیت {#inactivity-leak}

اگر لایه اجماع بیش از چهار ایپوک بدون نهایی شدن طی شده باشد، یک پروتکل اضطراری به نام "نشت عدم فعالیت" فعال می شود. هدف نهایی نشت عدم فعالیت، ایجاد شرایط لازم برای بازیابی نهایی شدن زنجیره است. همانطور که در بالا توضیح داده شد، نهایی شدن نیاز به اکثریت 2/3 از کل اتر سهامگذاری شده برای توافق در مورد نقاط بازرسی منبع و هدف دارد. اگر اعتبارسنج هایی که بیش از 1/3 از مجموع اعتبارسنج ها را نشان می‌دهند آفلاین شوند یا تصدیق‌های صحیح را ارائه نکنند، امکان نهایی کردن پست‌های بازرسی برای اکثریت 2/3 وجود ندارد. نشت عدم فعالیت اجازه می دهد تا سهام متعلق به اعتبارسنج های غیرفعال به تدریج از بین برود تا زمانی که آنها کمتر از 1/3 کل سهام را کنترل کنند و به اعتبارسنج های فعال باقی مانده اجازه می دهد زنجیره را نهایی کنند. هر چقدر هم که تعداد اعتبارسنجهای غیرفعال زیاد باشد، اعتبارسنجهای فعال باقی مانده در نهایت بیش از 2/3 سهام را کنترل خواهند کرد. از دست دادن سهام یک انگیزه قوی برای اعتبارسنج های غیرفعال است تا در اسرع وقت دوباره فعال شوند! سناریوی نشت عدم فعالیت در شبکه آزمایشی Medalla زمانی رخ داد که کمتر از 66 درصد از اعتبارسنج های فعال توانستند در مورد سر فعلی بلاکچین به توافق برسند. نشت عدم فعالیت فعال شد و در نهایت نهایی سازی دوباره به دست آمد!

طراحی پاداش، مجازات و جریمه متعلق به مکانیسم اجماع، اعتباسنج های انفرادی را تشویق می‌کند تا به درستی رفتار کنند. با این حال، از این انتخاب‌های طراحی، سیستمی پدیدار می‌شود که به شدت به توزیع برابر اعتبارسنج ها در بین چندین کاربر انگیزه می‌دهد و باید به شدت از تسلط تک کاربر جلوگیری کند.

## بیشتر بخوانید {#further-reading}

- [به‌روز رسانی اتریوم: لایه مشوق](https://eth2book.info/altair/part2/incentives)
- [مشوق‌ها در پروتکل هیبریدی Casper اتریوم](https://arxiv.org/pdf/1903.04205.pdf)
- [مشخصات تشریح شده ویتالیک](https://github.com/ethereum/annotated-spec/blob/master/phase0/beacon-chain.md#rewards-and-penalties-1)
- [نکات جلوگیری از جریمه شدن Eth2](https://medium.com/prysmatic-labs/eth2-slashing-prevention-tips-f6faa5025f50)

_منابع_

- _[https://benjaminion.xyz/eth2-annotated-spec/phase0/beacon-chain/](https://benjaminion.xyz/eth2-annotated-spec/phase0/beacon-chain/)_
